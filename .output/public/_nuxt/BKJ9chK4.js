import{k as _,y as T,z as A,c as s,a as e,q as i,m as p,s as c,n,t as o,F as x,A as w,o as l}from"./CBHnyUtF.js";import{g as f}from"./DI-sQVwe.js";const E={key:0},D={key:1},U={key:0,class:"bg-yellow text-yellow rounded"},$={key:1},N={key:2},S={class:"border text-center"},C={class:"border border-x border-y"},P={class:"border"},V={class:"border"},I={class:"border"},j={class:"border"},q={class:"border"},B={class:"border"},M={key:3},F={class:"flex flex-col"},G={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},H={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},L={class:"shadow overflow-hidden border-b border-gray-200 dark:border-gray-700 sm:rounded-lg"},Q={key:0},z={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},O={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},R={scope:"col",class:"px-6 py-4 whitespace-nowrap"},Y={scope:"col",class:"px-6 py-4 whitespace-nowrap"},J={scope:"col",class:"px-6 py-4 whitespace-nowrap"},K={scope:"col",class:"px-6 py-4 whitespace-nowrap"},W={scope:"col",class:"px-6 py-4 whitespace-nowrap"},X={scope:"col",class:"px-6 py-4 whitespace-nowrap"},Z={scope:"col",class:"px-6 py-4 whitespace-nowrap"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},le={__name:"tache",setup(re){const b=f`
  query {
    taches {
      collection {
        id
        title
        completed
        description
        owner {
          name
          username
          email
        }
      }
    }
  }
`,k=f`
   mutation AddTache($title: String!, $description: String!, $ownerId: ID!) {
     addTache(input: { title: $title, description: $description, owner: $owner, completed: $completed }) {
       title
       description
       completed
       owner  
     }
   }
`,{mutate:m,loading:h,error:g}=_(k),{result:v,loading:y,error:u}=T(b,null,{fetchPolicy:"cache-and-network"}),a=A(()=>{var d,t;return((t=(d=v.value)==null?void 0:d.taches)==null?void 0:t.collection)||[]});return(d,t)=>(l(),s(x,null,[t[18]||(t[18]=e("div",{class:"w-fuull md:w-1/2"},[e("h1",{class:"text-2xl font-bold text-red-600 underline text-center"},"Gestion des tâches")],-1)),e("div",null,[t[7]||(t[7]=e("h2",null,"Ajouter une tâche",-1)),e("form",null,[t[4]||(t[4]=e("div",null,[e("label",null," Titre:")],-1)),p(e("input",{class:"px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-slate-600","onUpdate:modelValue":t[0]||(t[0]=r=>d.title=r),type:"text",placeholder:"Titre"},null,512),[[c,d.title]]),t[5]||(t[5]=e("div",null,[e("label",null,"description:")],-1)),p(e("input",{class:"px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-slate-600","onUpdate:modelValue":t[1]||(t[1]=r=>d.description=r),type:"text",placeholder:"Description"},null,512),[[c,d.description]]),t[6]||(t[6]=e("div",null,[e("label",null,"Proprietaire")],-1)),p(e("input",{class:"px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-slate-600","onUpdate:modelValue":t[2]||(t[2]=r=>d.owner=r),type:"text",placeholder:"Proprietaire"},null,512),[[c,d.owner]]),e("div",null,[e("button",{onClick:t[3]||(t[3]=(...r)=>n(m)&&n(m)(...r))},"Ajouter")])]),n(h)?(l(),s("p",E,"Ajout en cours...")):i("",!0),n(g)?(l(),s("p",D,"Une erreur s'est produite : "+o(n(g).message),1)):i("",!0)]),t[19]||(t[19]=e("div",null,[e("h1",{class:"italic underline text-center text-neutral-950 font-medium"},"informations des taches des utilisateurs")],-1)),e("div",null,[n(y)?(l(),s("p",U,"Chargement en cours...")):i("",!0),n(u)?(l(),s("p",$,"Une erreur s'est produite : "+o(n(u).message),1)):i("",!0),a.value.length?(l(),s("ul",N,[(l(!0),s(x,null,w(a.value,r=>(l(),s("li",{key:r.id},[e("table",S,[e("thead",null,[e("tr",null,[t[8]||(t[8]=e("label",{for:"owner"},"Nom du propriétaire ",-1)),e("th",null,o(r.owner.name)+" "+o(r.owner.username),1)])]),e("tbody",null,[e("tr",C,[t[9]||(t[9]=e("th",null,"ID",-1)),e("td",null,o(r.id),1)]),t[16]||(t[16]=e("hr",null,null,-1)),e("tr",P,[t[10]||(t[10]=e("th",null,"Tache",-1)),e("td",null,o(r.title),1)]),e("tr",V,[t[11]||(t[11]=e("th",null,"Statut",-1)),e("td",null,o(r.completed?"Terminée":"En cours"),1)]),e("tr",I,[t[12]||(t[12]=e("th",null,"Description",-1)),e("td",null,o(r.description),1)]),e("tr",j,[t[13]||(t[13]=e("th",null,"Prenom",-1)),e("td",null,o(r.owner.username),1)]),e("tr",q,[t[14]||(t[14]=e("th",null,"Nom",-1)),e("td",null,o(r.owner.name),1)]),e("tr",B,[t[15]||(t[15]=e("th",null,"Email de utilisateur",-1)),e("td",null,o(r.owner.email),1)])])])]))),128))])):i("",!0),!n(y)&&!n(u)&&a.value.length===0?(l(),s("p",M," Aucune tâche trouvée. ")):i("",!0)]),e("div",F,[e("div",G,[e("div",H,[e("div",L,[a.value.length?(l(),s("ul",Q,[(l(!0),s(x,null,w(a.value,r=>(l(),s("li",{key:r.id},[e("table",z,[t[17]||(t[17]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("nav",null,[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Nom du Proprietaire"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"tache"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Description"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"id"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Statut"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"prenom"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"nom"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Email")])])],-1)),e("tbody",O,[e("tr",null,[e("td",R,o(r.owner.name)+" "+o(r.owner.username),1),e("td",Y,o(r.title),1),e("td",J,o(r.description),1),e("td",K,o(r.id),1),e("td",W,o(r.owner.name),1),e("td",X,o(r.owner.username),1),e("td",Z,o(r.owner.email),1),e("td",ee,[e("span",te,o(r.completed?"Terminée":"En cours"),1)])])])])]))),128))])):i("",!0)])])])])],64))}};export{le as default};
