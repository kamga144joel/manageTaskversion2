{"file":"profil.vue.mjs","mappings":";;;;;;;;;;;;AAmNM,UAAA,eAAe,IAAI,IAAI;AAWf,aAAS;AACR,cAAU;AACnB,UAAA,QAAQ,IAAI,EAAE;AACd,UAAA,WAAW,IAAI,EAAE;AACjB,UAAA,aAAa,IAAI,IAAI;AACrB,UAAA,gBAAgB,IAAI,IAAI;AAE9B,UAAM,iBAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWjB,UAAA;AAAA,MAEJ;AAAA,IAEF,IAAI,YAAY,cAAc;AAsCxB,UAAA,aAAa,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../components/profil.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg-teal-lightest border-t-4 border-teal rounded-b text-teal-darkest rounded-lg px-4 py-3 shadow-md\" role=\"alert\">\r\n    <div class=\"flex\">\r\n      <div class=\"py-1\"><svg class=\"fill-current h-6 w-6 text-teal mr-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"/></svg></div>\r\n      <div>\r\n        <p class=\"font-bold\">Our privacy policy has changed</p>\r\n        <p class=\"text-sm\">Make sure you know how these changes affect you.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!--icone, animations, transitions, graphisme, upload-->\r\n  <!-- 1. Conteneur Principal -->\r\n  <div class=\" responsive-container max-h-full border-green-light justify-center xl:justify-around items-center sm:justify-center w-full min-h-screen flex flex-col dark:bg-gray-900 bg-white rounded-lg max-w-full\">\r\n\r\n    <!-- 2. Barre de Navigation -->\r\n    <nav class=\"bg-gradient-to-r from-gray-800 to-gray-900 dark:from-gray-900 dark:to-gray-800 cursor-pointer p-4 flex items-center max-h-full justify-between w-full max-w-full sticky top-0 z-10 shadow-lg rounded-lg\">\r\n      <!-- Section Gauche -->\r\n      <div class=\"flex items-center space-x-8\">\r\n        <img class=\"inline-block h-16 w-16 rounded-full ring-4 ring-white flex-shrink-0\" src=\"/logo.jpg\" alt=\"MANAGETASKS Logo\"/>\r\n        <h1 class=\"text-3xl flex font-bold text-white select-text bg-gradient-to-r from-fuchsia-600 to-pink-600 bg-clip-text text-transparent\">MANAGETASKS</h1>\r\n      </div>\r\n\r\n      <!-- Section Droite: Liens et Bouton Dark Mode -->\r\n      <div class=\"items-center space-x-4\">\r\n\r\n        <!-- Lien detailWeb avec détails au survol -->\r\n        <div\r\n          class=\"relative items-center\"\r\n          @mouseenter=\"showDetail('detailWeb')\"\r\n          @mouseleave=\"hideDetail\"\r\n        > \r\n          <a\r\n            href=\"/detailWeb\"\r\n            @click=\"hideDetail\"\r\n            @mouseenter=\"showDetail('detailWeb')\"\r\n            class=\"text-lg font-semibold px-4 py-3 text-lime-400 rounded-lg hover:bg-lime-900 hover:text-lime-300 transition-all duration-200 flex\"\r\n          >\r\n            detailWeb\r\n          </a>\r\n          <!-- Le contenu des détails (initialement caché) -->\r\n          <div\r\n            v-show=\"activeDetail === 'detailWeb'\"\r\n            class=\"absolute z-20 flex mt-2 w-48 p-2 bg-white dark:bg-gray-700 rounded-md shadow-lg text-sm text-gray-700 dark:text-gray-200 border dark:border-gray-600\"\r\n          >\r\n            Description rapide de la page detailWeb.\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Lien courGratuit(tailwindcss) avec détails au survol -->\r\n        <div\r\n          class=\"relative\"\r\n          @mouseenter=\"showDetail('tailwind')\"\r\n          @mouseleave=\"hideDetail\"\r\n        >\r\n          <a\r\n            href=\"/menutcss\"\r\n            @click=\"hideDetail\"\r\n            class=\"text-lg font-semibold px-4 py-3 text-red-400 rounded-lg hover:bg-red-900 hover:text-red-300 transition-all duration-200\"\r\n          >\r\n            courGratuit(tailwindcss)\r\n          </a>\r\n          <div\r\n            v-show=\"activeDetail === 'tailwind'\"\r\n            class=\"absolute z-20 mt-2 w-48 p-2 flex bg-white dark:bg-gray-700 rounded-md shadow-lg text-sm text-gray-700 dark:text-gray-200 border dark:border-gray-600\"\r\n          >\r\n            Accédez au cours complet sur Tailwind CSS.\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Lien courGratuit(basecss) avec détails au survol -->\r\n        <div\r\n          class=\"relative\"\r\n          @mouseenter=\"showDetail('basecss')\"\r\n          @mouseleave=\"hideDetail\"\r\n        >\r\n          <a\r\n            href=\"/courcss\"\r\n            @click=\"hideDetail\"\r\n            class=\"text-lg font-semibold px-4 py-3 text-yellow-400 rounded-lg hover:bg-yellow-900 hover:text-yellow-300 transition-all duration-200\"\r\n          >\r\n            courGratuit(basecss)\r\n          </a>\r\n          <div\r\n            v-show=\"activeDetail === 'basecss'\"\r\n            class=\"absolute z-20 mt-2 w-48 p-2  bg-white dark:bg-gray-700 rounded-md shadow-lg text-sm text-gray-700 dark:text-gray-200 border dark:border-gray-600\"\r\n          >\r\n            Apprenez les bases fondamentales du CSS.\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Lien Connectez-vous avec détails au survol -->\r\n        <div\r\n          class=\"relative\"\r\n          @mouseenter=\"showDetail('login')\"\r\n          @mouqseleave=\"hideDetail\"\r\n        >\r\n          <a\r\n            href=\"/login\"\r\n            @click=\"hideDetail\"\r\n            class=\"text-lg font-semibold px-6 py-3 bg-lime-600 text-white rounded-lg hover:bg-lime-700 transition-all duration-200 flex\"\r\n          >\r\n            Connectez-vous\r\n          </a>\r\n          <div\r\n            v-show=\"activeDetail === 'login'\"\r\n            class=\"absolute z-20 mt-2 w-48 p-2 flex bg-white dark:bg-gray-700 rounded-md shadow-lg text-sm text-gray-700 dark:text-gray-200 border dark:border-gray-600 right-0\"\r\n          >\r\n            Accédez à votre compte ou créez-en un.\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Bouton Dark Mode (inchangé) -->\r\n        <button @click=\"toggleDarkMode\"\r\n           class=\"p-2 rounded-md text-gray-500 dark:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n           aria-label=\"Toggle Dark Mode\"\r\n        >\r\n           <svg v-if=\"!isDarkMode\" xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\">\r\n               <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n           </svg>\r\n           <svg v-else xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\">\r\n               <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\" />\r\n           </svg>\r\n        </button>\r\n      </div>\r\n    </nav>\r\n\r\n    <!-- 3. Zone de Contenu Principal (inchangée) -->\r\n    <div class=\"flex-grow flex items-center justify-center p-6\">\r\n      <div class=\"bg-white text-black shadow-lg rounded-lg p-8 w-full max-w-md\">\r\n        <h1 class=\"underline font-bold text-center mb-4 text-green-600\">\r\n          Bienvenue sur notre site Web\r\n        </h1>\r\n        <h2 class=\"text-center text-gray-700 mb-6\">\r\n          Connectez-vous pour bénéficier de nos services\r\n        </h2>\r\n        <h2 class=\"bg-red-700\">vous n'avez pas de conte MANAGETASKS??? c'est pas grave!!!<a\r\n          href=\"/inscription\" class=\"underline\">créez-en</a></h2>\r\n\r\n        <p v-if=\"loading\" class=\"text-center text-gray-500\">Connexion en cours...</p>\r\n        <form v-else @submit.prevent=\"handleLogin\" class=\"space-y-4\">\r\n          <div>\r\n            <label for=\"email\" class=\"block text-gray-700 mb-1\">Email</label>\r\n            <input\r\n              v-model=\"email\"\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"dev-kaiser@gmail.com\"\r\n              autocomplete=\"email\"\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label for=\"password\" class=\"block text-gray-700 mb-1\">Mot de passe</label>\r\n            <input\r\n              v-model=\"password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"********\"\r\n              autocomplete=\"current-password\"\r\n              class=\"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-red-400\"\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            :disabled=\"loading\"\r\n            class=\"w-full bg-red-500 text-white py-2 rounded hover:bg-red-600 transition disabled:opacity-50\"\r\n          >\r\n            Se connecter\r\n          </button>\r\n          <a class=\"inline-block align-baseline font-bold text-sm text-blue hover:text-blue-darker\" href=\"#\">\r\n            Mot de passe oublier?\r\n          </a>\r\n          <button\r\n            type=\"button\"\r\n            class=\"w-full bg-white border border-gray-300 text-gray-700 py-2 rounded flex items-center justify-center mt-2 hover:bg-gray-50\"\r\n            @click=\"loginWithGoogle\"\r\n          >\r\n            <img\r\n              src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\"\r\n              alt=\"Google\"\r\n              class=\"w-5 h-5 mr-2 hover:text-yellow-500\"\r\n            />\r\n            Se connecter avec Google\r\n          </button>\r\n          <p v-if=\"mutationError || localError\" class=\"text-red-600 text-center mt-2\">\r\n            {{ mutationError ? mutationError.message : localError }}\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div class=\"bg-blue-lightest border-t border-b border-blue text-blue-dark px-4 py-3\" role=\"alert\">\r\n      <p class=\"font-bold\">Message d'information</p>\r\n      <p class=\"text-sm\"> Quelques textes supplémentaires pour expliquer ledit message..</p>\r\n    </div>\r\n    <p class=\"text-center text-yellow-900 text-xs\">\r\n      ©2020 Acme Corp. All rights reserved.\r\n    </p>\r\n  </div>\r\n  \r\n \r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { useMutation, useApolloClient } from '@vue/apollo-composable';\r\nimport gql from 'graphql-tag';\r\n\r\n// --- State pour les détails au survol ---\r\nconst activeDetail = ref(null); // Stocke l'ID du détail à afficher (ou null)\r\n\r\nconst showDetail = (detailId) => {\r\n  activeDetail.value = detailId;\r\n};\r\n\r\nconst hideDetail = () => {\r\n  activeDetail.value = null;\r\n};\r\n\r\n// --- Logique de Connexion (inchangée) ---\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst email = ref('');\r\nconst password = ref('');\r\nconst localError = ref(null);\r\nconst mutationError = ref(null);\r\n\r\nconst LOGIN_MUTATION = gql`\r\n  mutation Login($email: String!, $password: String!) {\r\n    loginUser(input: { email: $email, password: $password }) {\r\n      user {\r\n        id\r\n        token\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst {\r\n  mutate: executeLogin,\r\n  loading,\r\n  error: apolloLoginError\r\n} = useMutation(LOGIN_MUTATION);\r\n\r\nconst loginWithGoogle = () => {\r\n  window.location.href = 'https://localhost:8000/auth/google';\r\n};\r\n\r\nconst handleLogin = async () => {\r\n  localError.value = null;\r\n  mutationError.value = null;\r\n\r\n  if (!email.value || !password.value) {\r\n    localError.value = 'Veuillez remplir tous les champs.';\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const result = await executeLogin({\r\n      email: email.value,\r\n      password: password.value,\r\n    });\r\n\r\n    const token = result?.data?.loginUser?.user?.token;\r\n    const userId = result?.data?.loginUser?.user?.id;\r\n\r\n    if (!token) throw new Error('Token non reçu depuis le serveur.');\r\n    if (!userId) throw new Error('User ID non reçu depuis le serveur après la connexion.');\r\n\r\n    localStorage.setItem('auth_token', token);\r\n\r\n    await router.push('/infolink');\r\n\r\n  } catch (err) {\r\n    console.error('Erreur de connexion :', err);\r\n    mutationError.value = apolloLoginError.value?.message || err.message || 'Une erreur inconnue est survenue.';\r\n  }\r\n};\r\n\r\n// --- Logique du Mode Sombre (inchangée) ---\r\nconst isDarkMode = ref(false);\r\n\r\nconst applyDarkModePreference = (darkModeEnabled) => {\r\n  isDarkMode.value = darkModeEnabled;\r\n  if (darkModeEnabled) {\r\n    document.documentElement.classList.add('dark');\r\n  } else {\r\n    document.documentElement.classList.remove('dark');\r\n  }\r\n};\r\n\r\nconst toggleDarkMode = () => {\r\n  const newState = !isDarkMode.value;\r\n  applyDarkModePreference(newState);\r\n  try {\r\n    localStorage.setItem('theme', newState ? 'dark' : 'light');\r\n  } catch (error) {\r\n    console.error(\"Echec de la sauvegarde de la préférence de thème:\", error);\r\n  }\r\n};\r\n\r\n// --- onMounted (inchangé) ---\r\nonMounted(() => {\r\n  const params = new URLSearchParams(window.location.search);\r\n  const tokenFromGoogle = params.get('token');\r\n  if (tokenFromGoogle) {\r\n    localStorage.setItem('auth_token', tokenFromGoogle);\r\n    router.push('/infolink');\r\n    return;\r\n  }\r\n\r\n  let preferredTheme = 'light';\r\n  try {\r\n    const savedTheme = localStorage.getItem('theme');\r\n    if (savedTheme) {\r\n      preferredTheme = savedTheme;\r\n    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\r\n      preferredTheme = 'dark';\r\n    }\r\n  } catch (e) {\r\n    console.error(\"Échec de l'accès à la préférence de thème:\", e);\r\n    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\r\n      preferredTheme = 'dark';\r\n    }\r\n  }\r\n  applyDarkModePreference(preferredTheme === 'dark');\r\n});\r\n\r\n</script>\r\n\r\n<style scoped>\r\n/* Styles spécifiques au composant si nécessaire */\r\n</style>\r\n"],"version":3}