{"version":3,"file":"logos-CnfxaOuw.js","sources":["../../../../pages/logos.vue"],"sourcesContent":["<template>\n  <div class=\"container mx-auto px-4 py-8\">\n    <h1 class=\"text-2xl font-bold text-red-600 underline text-center mb-8\">Gestion des logos</h1>\n\n    <!-- Formulaire d'ajout de logo -->\n    <div class=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n      <h2 class=\"text-xl font-semibold mb-4\">Ajouter un logo</h2>\n      <form @submit.prevent=\"handleAddLogo\">\n        <div class=\"space-y-4\">\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Nom:</label>\n            <input \n              v-model=\"logoName\" \n              type=\"text\" \n              placeholder=\"Nom du logo\"\n              class=\"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-slate-600\"\n              required\n            />\n          </div>\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">URL:</label>\n            <input \n              v-model=\"logoUrl\" \n              type=\"text\" \n              placeholder=\"URL de l'image\"\n              class=\"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-slate-600\"\n              required\n            />\n          </div>\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Description:</label>\n            <input \n              v-model=\"logoDescription\" \n              type=\"text\" \n              placeholder=\"Description\"\n              class=\"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-slate-600\"\n              required\n            />\n          </div>\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Catégorie:</label>\n            <input \n              v-model=\"logoCategory\" \n              type=\"text\" \n              placeholder=\"Catégorie\"\n              class=\"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-slate-600\"\n              required\n            />\n          </div>\n          <div class=\"flex justify-end\">\n            <button \n              type=\"submit\"\n              class=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n            >\n              Ajouter\n            </button>\n          </div>\n        </div>\n      </form>\n\n      <p v-if=\"addLogoLoading\" class=\"mt-4 text-blue-500\">Ajout en cours...</p>\n      <p v-if=\"addLogoError\" class=\"mt-4 text-red-500\">Une erreur s'est produite : {{ addLogoError.message }}</p>\n    </div>\n\n    <!-- Liste des logos -->\n    <div class=\"bg-white rounded-lg shadow-md p-6\">\n      <h2 class=\"text-xl font-semibold mb-4\">Liste des logos</h2>\n      \n      <div v-if=\"loading\" class=\"text-center py-4\">\n        <p class=\"text-yellow-600\">Chargement en cours...</p>\n      </div>\n      \n      <div v-else-if=\"error\" class=\"text-center py-4\">\n        <p class=\"text-red-600\">Une erreur s'est produite : {{ error.message }}</p>\n      </div>\n      \n      <div v-if=\"logos.length === 0\" class=\"text-center py-4\">\n        <p>Aucun logo trouvé.</p>\n      </div>\n      \n      <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div v-for=\"logo in logos\" :key=\"logo.id\" class=\"bg-gray-50 rounded-lg p-4\">\n          <div class=\"flex items-center gap-4\">\n            <img :src=\"logo.url\" :alt=\"logo.name\" class=\"w-16 h-16 object-contain\">\n            <div>\n              <h3 class=\"font-semibold\">{{ logo.name }}</h3>\n              <p class=\"text-sm text-gray-600\">{{ logo.description }}</p>\n              <p class=\"text-sm text-gray-500\">Catégorie: {{ logo.category }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useQuery, useMutation } from '@vue/apollo-composable'\nimport { gql } from 'graphql-tag'\n\n// États du formulaire\nconst logoName = ref('')\nconst logoUrl = ref('')\nconst logoDescription = ref('')\nconst logoCategory = ref('')\n\n// Requêtes GraphQL\nconst GET_LOGOS_QUERY = gql`\n  query GetLogos {\n    logos {\n      id\n      name\n      url\n      description\n      category\n    }\n  }\n`\n\nconst CREATE_LOGO_MUTATION = gql`\n  mutation CreateLogo($name: String!, $url: String!, $description: String!, $category: String!) {\n    createLogo(\n      name: $name,\n      url: $url,\n      description: $description,\n      category: $category\n    ) {\n      id\n      name\n      url\n      description\n      category\n    }\n  }\n`\n\n// Utilisation des mutations et requêtes\nconst { mutate: createLogo, loading: addLogoLoading, error: addLogoError } = useMutation(CREATE_LOGO_MUTATION)\nconst logos = ref([])\nconst { result, loading, error } = useQuery(GET_LOGOS_QUERY)\n\n// Mettre à jour la liste des logos quand les données changent\nwatch(result, (newValue) => {\n  if (newValue?.logos) {\n    logos.value = newValue.logos\n  }\n})\n\n// Fonction pour gérer l'ajout de logo\nconst handleAddLogo = async () => {\n  if (!logoName.value || !logoUrl.value || !logoDescription.value || !logoCategory.value) return\n\n  try {\n    await createLogo({\n      name: logoName.value,\n      url: logoUrl.value,\n      description: logoDescription.value,\n      category: logoCategory.value\n    })\n    \n    // Réinitialiser le formulaire\n    logoName.value = ''\n    logoUrl.value = ''\n    logoDescription.value = ''\n    logoCategory.value = ''\n  } catch (err) {\n    console.error('Erreur lors de l\\'ajout du logo:', err)\n    addLogoError.value = err\n  }\n}\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,UAAU,IAAI,EAAE;AACtB,UAAM,kBAAkB,IAAI,EAAE;AAC9B,UAAM,eAAe,IAAI,EAAE;AAG3B,UAAM,kBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYxB,UAAM,uBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkB7B,UAAM,EAAsB,SAAS,gBAAgB,OAAO,aAAc,IAAG,YAAY,oBAAoB;AAC7G,UAAM,QAAQ,IAAI,CAAE,CAAA;AACpB,UAAM,EAAE,QAAQ,SAAS,MAAO,IAAG,SAAS,eAAe;AAG3D,UAAM,QAAQ,CAAC,aAAa;AAC1B,UAAI,qCAAU,OAAO;AACnB,cAAM,QAAQ,SAAS;AAAA,MAC3B;AAAA,IACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}