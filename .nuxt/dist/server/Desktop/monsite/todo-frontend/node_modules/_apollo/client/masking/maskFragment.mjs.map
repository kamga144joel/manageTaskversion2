{"version":3,"file":"maskFragment.mjs","sources":["../../../../../../../../../../node_modules/@apollo/client/masking/maskFragment.js"],"sourcesContent":["import { Kind } from \"graphql\";\nimport { MapImpl, SetImpl, warnOnImproperCacheImplementation, } from \"./utils.js\";\nimport { invariant } from \"../utilities/globals/index.js\";\nimport equal from \"@wry/equality\";\nimport { maskDefinition } from \"./maskDefinition.js\";\nimport { createFragmentMap, getFragmentDefinitions, } from \"../utilities/index.js\";\n/** @internal */\nexport function maskFragment(data, document, cache, fragmentName) {\n    if (!cache.fragmentMatches) {\n        if (globalThis.__DEV__ !== false) {\n            warnOnImproperCacheImplementation();\n        }\n        return data;\n    }\n    var fragments = document.definitions.filter(function (node) {\n        return node.kind === Kind.FRAGMENT_DEFINITION;\n    });\n    if (typeof fragmentName === \"undefined\") {\n        invariant(fragments.length === 1, 49, fragments.length);\n        fragmentName = fragments[0].name.value;\n    }\n    var fragment = fragments.find(function (fragment) { return fragment.name.value === fragmentName; });\n    invariant(!!fragment, 50, fragmentName);\n    if (data == null) {\n        // Maintain the original `null` or `undefined` value\n        return data;\n    }\n    if (equal(data, {})) {\n        // Return early and skip the masking algorithm if we don't have any data\n        // yet. This can happen when cache.diff returns an empty object which is\n        // used from watchFragment.\n        return data;\n    }\n    return maskDefinition(data, fragment.selectionSet, {\n        operationType: \"fragment\",\n        operationName: fragment.name.value,\n        fragmentMap: createFragmentMap(getFragmentDefinitions(document)),\n        cache: cache,\n        mutableTargets: new MapImpl(),\n        knownChanged: new SetImpl(),\n    });\n}\n//# sourceMappingURL=maskFragment.js.map"],"names":["fragment"],"mappings":";;;;;;;;AAOO,SAAS,aAAa,MAAM,UAAU,OAAO,cAAc;AAC1D,MAAA,CAAC,MAAM,iBAAiB;AACpB,QAAA,WAAW,YAAY,OAAO;AACI,wCAAA;AAAA,IAAA;AAE/B,WAAA;AAAA,EAAA;AAEX,MAAI,YAAY,SAAS,YAAY,OAAO,SAAU,MAAM;AACjD,WAAA,KAAK,SAAS,KAAK;AAAA,EAAA,CAC7B;AACG,MAAA,OAAO,iBAAiB,aAAa;AACrC,cAAU,UAAU,WAAW,GAAG,IAAI,UAAU,MAAM;AACvC,mBAAA,UAAU,CAAC,EAAE,KAAK;AAAA,EAAA;AAErC,MAAI,WAAW,UAAU,KAAK,SAAUA,WAAU;AAASA,WAAAA,UAAS,KAAK,UAAU;AAAA,EAAA,CAAe;AAClG,YAAU,CAAC,CAAC,UAAU,IAAI,YAAY;AACtC,MAAI,QAAQ,MAAM;AAEP,WAAA;AAAA,EAAA;AAEX,MAAI,MAAM,MAAM,CAAA,CAAE,GAAG;AAIV,WAAA;AAAA,EAAA;AAEJ,SAAA,eAAe,MAAM,SAAS,cAAc;AAAA,IAC/C,eAAe;AAAA,IACf,eAAe,SAAS,KAAK;AAAA,IAC7B,aAAa,kBAAkB,uBAAuB,QAAQ,CAAC;AAAA,IAC/D;AAAA,IACA,gBAAgB,IAAI,QAAQ;AAAA,IAC5B,cAAc,IAAI,QAAQ;AAAA,EAAA,CAC7B;AACL;","x_google_ignoreList":[0]}