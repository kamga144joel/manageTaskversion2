{"version":3,"file":"ApolloLink.mjs","sources":["../../../../../../../../../../../node_modules/@apollo/client/link/core/ApolloLink.js"],"sourcesContent":["import { newInvariantError, invariant } from \"../../utilities/globals/index.js\";\nimport { Observable } from \"../../utilities/index.js\";\nimport { validateOperation, createOperation, transformOperation, } from \"../utils/index.js\";\nfunction passthrough(op, forward) {\n    return (forward ? forward(op) : Observable.of());\n}\nfunction toLink(handler) {\n    return typeof handler === \"function\" ? new ApolloLink(handler) : handler;\n}\nfunction isTerminating(link) {\n    return link.request.length <= 1;\n}\nvar ApolloLink = /** @class */ (function () {\n    function ApolloLink(request) {\n        if (request)\n            this.request = request;\n    }\n    ApolloLink.empty = function () {\n        return new ApolloLink(function () { return Observable.of(); });\n    };\n    ApolloLink.from = function (links) {\n        if (links.length === 0)\n            return ApolloLink.empty();\n        return links.map(toLink).reduce(function (x, y) { return x.concat(y); });\n    };\n    ApolloLink.split = function (test, left, right) {\n        var leftLink = toLink(left);\n        var rightLink = toLink(right || new ApolloLink(passthrough));\n        var ret;\n        if (isTerminating(leftLink) && isTerminating(rightLink)) {\n            ret = new ApolloLink(function (operation) {\n                return test(operation) ?\n                    leftLink.request(operation) || Observable.of()\n                    : rightLink.request(operation) || Observable.of();\n            });\n        }\n        else {\n            ret = new ApolloLink(function (operation, forward) {\n                return test(operation) ?\n                    leftLink.request(operation, forward) || Observable.of()\n                    : rightLink.request(operation, forward) || Observable.of();\n            });\n        }\n        return Object.assign(ret, { left: leftLink, right: rightLink });\n    };\n    ApolloLink.execute = function (link, operation) {\n        return (link.request(createOperation(operation.context, transformOperation(validateOperation(operation)))) || Observable.of());\n    };\n    ApolloLink.concat = function (first, second) {\n        var firstLink = toLink(first);\n        if (isTerminating(firstLink)) {\n            globalThis.__DEV__ !== false && invariant.warn(38, firstLink);\n            return firstLink;\n        }\n        var nextLink = toLink(second);\n        var ret;\n        if (isTerminating(nextLink)) {\n            ret = new ApolloLink(function (operation) {\n                return firstLink.request(operation, function (op) { return nextLink.request(op) || Observable.of(); }) || Observable.of();\n            });\n        }\n        else {\n            ret = new ApolloLink(function (operation, forward) {\n                return (firstLink.request(operation, function (op) {\n                    return nextLink.request(op, forward) || Observable.of();\n                }) || Observable.of());\n            });\n        }\n        return Object.assign(ret, { left: firstLink, right: nextLink });\n    };\n    ApolloLink.prototype.split = function (test, left, right) {\n        return this.concat(ApolloLink.split(test, left, right || new ApolloLink(passthrough)));\n    };\n    ApolloLink.prototype.concat = function (next) {\n        return ApolloLink.concat(this, next);\n    };\n    ApolloLink.prototype.request = function (operation, forward) {\n        throw newInvariantError(39);\n    };\n    ApolloLink.prototype.onError = function (error, observer) {\n        if (observer && observer.error) {\n            observer.error(error);\n            // Returning false indicates that observer.error does not need to be\n            // called again, since it was already called (on the previous line).\n            // Calling observer.error again would not cause any real problems,\n            // since only the first call matters, but custom onError functions\n            // might have other reasons for wanting to prevent the default\n            // behavior by returning false.\n            return false;\n        }\n        // Throw errors will be passed to observer.error.\n        throw error;\n    };\n    ApolloLink.prototype.setOnError = function (fn) {\n        this.onError = fn;\n        return this;\n    };\n    return ApolloLink;\n}());\nexport { ApolloLink };\n//# sourceMappingURL=ApolloLink.js.map"],"names":["ApolloLink"],"mappings":"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","x_google_ignoreList":[0]}