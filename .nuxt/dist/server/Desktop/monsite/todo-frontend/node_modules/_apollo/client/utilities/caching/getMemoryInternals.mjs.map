{"version":3,"file":"getMemoryInternals.mjs","sources":["../../../../../../../../../../../node_modules/@apollo/client/utilities/caching/getMemoryInternals.js"],"sourcesContent":["import { __assign, __spreadArray } from \"tslib\";\nimport { cacheSizes } from \"./sizes.js\";\nvar globalCaches = {};\nexport function registerGlobalCache(name, getSize) {\n    globalCaches[name] = getSize;\n}\n/**\n * For internal purposes only - please call `ApolloClient.getMemoryInternals` instead\n * @internal\n */\nexport var getApolloClientMemoryInternals = globalThis.__DEV__ !== false ?\n    _getApolloClientMemoryInternals\n    : undefined;\n/**\n * For internal purposes only - please call `ApolloClient.getMemoryInternals` instead\n * @internal\n */\nexport var getInMemoryCacheMemoryInternals = globalThis.__DEV__ !== false ?\n    _getInMemoryCacheMemoryInternals\n    : undefined;\n/**\n * For internal purposes only - please call `ApolloClient.getMemoryInternals` instead\n * @internal\n */\nexport var getApolloCacheMemoryInternals = globalThis.__DEV__ !== false ?\n    _getApolloCacheMemoryInternals\n    : undefined;\nfunction getCurrentCacheSizes() {\n    // `defaultCacheSizes` is a `const enum` that will be inlined during build, so we have to reconstruct it's shape here\n    var defaults = {\n        parser: 1000 /* defaultCacheSizes[\"parser\"] */,\n        canonicalStringify: 1000 /* defaultCacheSizes[\"canonicalStringify\"] */,\n        print: 2000 /* defaultCacheSizes[\"print\"] */,\n        \"documentTransform.cache\": 2000 /* defaultCacheSizes[\"documentTransform.cache\"] */,\n        \"queryManager.getDocumentInfo\": 2000 /* defaultCacheSizes[\"queryManager.getDocumentInfo\"] */,\n        \"PersistedQueryLink.persistedQueryHashes\": 2000 /* defaultCacheSizes[\"PersistedQueryLink.persistedQueryHashes\"] */,\n        \"fragmentRegistry.transform\": 2000 /* defaultCacheSizes[\"fragmentRegistry.transform\"] */,\n        \"fragmentRegistry.lookup\": 1000 /* defaultCacheSizes[\"fragmentRegistry.lookup\"] */,\n        \"fragmentRegistry.findFragmentSpreads\": 4000 /* defaultCacheSizes[\"fragmentRegistry.findFragmentSpreads\"] */,\n        \"cache.fragmentQueryDocuments\": 1000 /* defaultCacheSizes[\"cache.fragmentQueryDocuments\"] */,\n        \"removeTypenameFromVariables.getVariableDefinitions\": 2000 /* defaultCacheSizes[\"removeTypenameFromVariables.getVariableDefinitions\"] */,\n        \"inMemoryCache.maybeBroadcastWatch\": 5000 /* defaultCacheSizes[\"inMemoryCache.maybeBroadcastWatch\"] */,\n        \"inMemoryCache.executeSelectionSet\": 50000 /* defaultCacheSizes[\"inMemoryCache.executeSelectionSet\"] */,\n        \"inMemoryCache.executeSubSelectedArray\": 10000 /* defaultCacheSizes[\"inMemoryCache.executeSubSelectedArray\"] */,\n    };\n    return Object.fromEntries(Object.entries(defaults).map(function (_a) {\n        var k = _a[0], v = _a[1];\n        return [\n            k,\n            cacheSizes[k] || v,\n        ];\n    }));\n}\nfunction _getApolloClientMemoryInternals() {\n    var _a, _b, _c, _d, _e;\n    if (!(globalThis.__DEV__ !== false))\n        throw new Error(\"only supported in development mode\");\n    return {\n        limits: getCurrentCacheSizes(),\n        sizes: __assign({ print: (_a = globalCaches.print) === null || _a === void 0 ? void 0 : _a.call(globalCaches), parser: (_b = globalCaches.parser) === null || _b === void 0 ? void 0 : _b.call(globalCaches), canonicalStringify: (_c = globalCaches.canonicalStringify) === null || _c === void 0 ? void 0 : _c.call(globalCaches), links: linkInfo(this.link), queryManager: {\n                getDocumentInfo: this[\"queryManager\"][\"transformCache\"].size,\n                documentTransforms: transformInfo(this[\"queryManager\"].documentTransform),\n            } }, (_e = (_d = this.cache).getMemoryInternals) === null || _e === void 0 ? void 0 : _e.call(_d)),\n    };\n}\nfunction _getApolloCacheMemoryInternals() {\n    return {\n        cache: {\n            fragmentQueryDocuments: getWrapperInformation(this[\"getFragmentDoc\"]),\n        },\n    };\n}\nfunction _getInMemoryCacheMemoryInternals() {\n    var fragments = this.config.fragments;\n    return __assign(__assign({}, _getApolloCacheMemoryInternals.apply(this)), { addTypenameDocumentTransform: transformInfo(this[\"addTypenameTransform\"]), inMemoryCache: {\n            executeSelectionSet: getWrapperInformation(this[\"storeReader\"][\"executeSelectionSet\"]),\n            executeSubSelectedArray: getWrapperInformation(this[\"storeReader\"][\"executeSubSelectedArray\"]),\n            maybeBroadcastWatch: getWrapperInformation(this[\"maybeBroadcastWatch\"]),\n        }, fragmentRegistry: {\n            findFragmentSpreads: getWrapperInformation(fragments === null || fragments === void 0 ? void 0 : fragments.findFragmentSpreads),\n            lookup: getWrapperInformation(fragments === null || fragments === void 0 ? void 0 : fragments.lookup),\n            transform: getWrapperInformation(fragments === null || fragments === void 0 ? void 0 : fragments.transform),\n        } });\n}\nfunction isWrapper(f) {\n    return !!f && \"dirtyKey\" in f;\n}\nfunction getWrapperInformation(f) {\n    return isWrapper(f) ? f.size : undefined;\n}\nfunction isDefined(value) {\n    return value != null;\n}\nfunction transformInfo(transform) {\n    return recurseTransformInfo(transform).map(function (cache) { return ({ cache: cache }); });\n}\nfunction recurseTransformInfo(transform) {\n    return transform ?\n        __spreadArray(__spreadArray([\n            getWrapperInformation(transform === null || transform === void 0 ? void 0 : transform[\"performWork\"])\n        ], recurseTransformInfo(transform === null || transform === void 0 ? void 0 : transform[\"left\"]), true), recurseTransformInfo(transform === null || transform === void 0 ? void 0 : transform[\"right\"]), true).filter(isDefined)\n        : [];\n}\nfunction linkInfo(link) {\n    var _a;\n    return link ?\n        __spreadArray(__spreadArray([\n            (_a = link === null || link === void 0 ? void 0 : link.getMemoryInternals) === null || _a === void 0 ? void 0 : _a.call(link)\n        ], linkInfo(link === null || link === void 0 ? void 0 : link.left), true), linkInfo(link === null || link === void 0 ? void 0 : link.right), true).filter(isDefined)\n        : [];\n}\n//# sourceMappingURL=getMemoryInternals.js.map"],"names":[],"mappings":";;AAEA,IAAI,eAAe,CAAC;AACJ,SAAA,oBAAoB,MAAM,SAAS;AAC/C,eAAa,IAAI,IAAI;AACzB;AAKO,IAAI,iCAAiC,WAAW,YAAY,QAC/D,kCACE;AAKC,IAAI,kCAAkC,WAAW,YAAY,QAChE,mCACE;AAKC,IAAI,gCAAgC,WAAW,YAAY,QAC9D,iCACE;AACN,SAAS,uBAAuB;AAE5B,MAAI,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,oBAAoB;AAAA,IACpB,OAAO;AAAA,IACP,2BAA2B;AAAA,IAC3B,gCAAgC;AAAA,IAChC,2CAA2C;AAAA,IAC3C,8BAA8B;AAAA,IAC9B,2BAA2B;AAAA,IAC3B,wCAAwC;AAAA,IACxC,gCAAgC;AAAA,IAChC,sDAAsD;AAAA,IACtD,qCAAqC;AAAA,IACrC,qCAAqC;AAAA,IACrC,yCAAyC;AAAA,EAC7C;AACO,SAAA,OAAO,YAAY,OAAO,QAAQ,QAAQ,EAAE,IAAI,SAAU,IAAI;AACjE,QAAI,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC;AAChB,WAAA;AAAA,MACH;AAAA,MACA,WAAW,CAAC,KAAK;AAAA,IACrB;AAAA,EAAA,CACH,CAAC;AACN;AACA,SAAS,kCAAkC;AACnC,MAAA,IAAI,IAAI,IAAI,IAAI;AAChB,MAAA,EAAE,WAAW,YAAY;AACnB,UAAA,IAAI,MAAM,oCAAoC;AACjD,SAAA;AAAA,IACH,QAAQ,qBAAqB;AAAA,IAC7B,OAAO,SAAS,EAAE,QAAQ,KAAK,aAAa,WAAW,QAAQ,OAAO,SAAS,SAAS,GAAG,KAAK,YAAY,GAAG,SAAS,KAAK,aAAa,YAAY,QAAQ,OAAO,SAAS,SAAS,GAAG,KAAK,YAAY,GAAG,qBAAqB,KAAK,aAAa,wBAAwB,QAAQ,OAAO,SAAS,SAAS,GAAG,KAAK,YAAY,GAAG,OAAO,SAAS,KAAK,IAAI,GAAG,cAAc;AAAA,MACvW,iBAAiB,KAAK,cAAc,EAAE,gBAAgB,EAAE;AAAA,MACxD,oBAAoB,cAAc,KAAK,cAAc,EAAE,iBAAiB;AAAA,IAC1E,EAAA,IAAI,MAAM,KAAK,KAAK,OAAO,wBAAwB,QAAQ,OAAO,SAAS,SAAS,GAAG,KAAK,EAAE,CAAC;AAAA,EACzG;AACJ;AACA,SAAS,iCAAiC;AAC/B,SAAA;AAAA,IACH,OAAO;AAAA,MACH,wBAAwB,sBAAsB,KAAK,gBAAgB,CAAC;AAAA,IAAA;AAAA,EAE5E;AACJ;AACA,SAAS,mCAAmC;AACpC,MAAA,YAAY,KAAK,OAAO;AAC5B,SAAO,SAAS,SAAS,CAAI,GAAA,+BAA+B,MAAM,IAAI,CAAC,GAAG,EAAE,8BAA8B,cAAc,KAAK,sBAAsB,CAAC,GAAG,eAAe;AAAA,IAC9J,qBAAqB,sBAAsB,KAAK,aAAa,EAAE,qBAAqB,CAAC;AAAA,IACrF,yBAAyB,sBAAsB,KAAK,aAAa,EAAE,yBAAyB,CAAC;AAAA,IAC7F,qBAAqB,sBAAsB,KAAK,qBAAqB,CAAC;AAAA,KACvE,kBAAkB;AAAA,IACjB,qBAAqB,sBAAsB,cAAc,QAAQ,cAAc,SAAS,SAAS,UAAU,mBAAmB;AAAA,IAC9H,QAAQ,sBAAsB,cAAc,QAAQ,cAAc,SAAS,SAAS,UAAU,MAAM;AAAA,IACpG,WAAW,sBAAsB,cAAc,QAAQ,cAAc,SAAS,SAAS,UAAU,SAAS;AAAA,EAAA,GAC3G;AACX;AACA,SAAS,UAAU,GAAG;AACX,SAAA,CAAC,CAAC,KAAK,cAAc;AAChC;AACA,SAAS,sBAAsB,GAAG;AAC9B,SAAO,UAAU,CAAC,IAAI,EAAE,OAAO;AACnC;AACA,SAAS,UAAU,OAAO;AACtB,SAAO,SAAS;AACpB;AACA,SAAS,cAAc,WAAW;AAC9B,SAAO,qBAAqB,SAAS,EAAE,IAAI,SAAU,OAAO;AAAE,WAAQ,EAAE,MAAa;AAAA,EAAA,CAAK;AAC9F;AACA,SAAS,qBAAqB,WAAW;AAC9B,SAAA,YACH,cAAc,cAAc;AAAA,IACxB,sBAAsB,cAAc,QAAQ,cAAc,SAAS,SAAS,UAAU,aAAa,CAAC;AAAA,EACrG,GAAA,qBAAqB,cAAc,QAAQ,cAAc,SAAS,SAAS,UAAU,MAAM,CAAC,GAAG,IAAI,GAAG,qBAAqB,cAAc,QAAQ,cAAc,SAAS,SAAS,UAAU,OAAO,CAAC,GAAG,IAAI,EAAE,OAAO,SAAS,IAC7N,CAAC;AACX;AACA,SAAS,SAAS,MAAM;AAChB,MAAA;AACG,SAAA,OACH,cAAc,cAAc;AAAA,KACvB,KAAK,SAAS,QAAQ,SAAS,SAAS,SAAS,KAAK,wBAAwB,QAAQ,OAAO,SAAS,SAAS,GAAG,KAAK,IAAI;AAAA,EAChI,GAAG,SAAS,SAAS,QAAQ,SAAS,SAAS,SAAS,KAAK,IAAI,GAAG,IAAI,GAAG,SAAS,SAAS,QAAQ,SAAS,SAAS,SAAS,KAAK,KAAK,GAAG,IAAI,EAAE,OAAO,SAAS,IACjK,CAAC;AACX;","x_google_ignoreList":[0]}