import{_ as $,r as s,k as I,j,c as p,a as r,p as q,q as x,m as c,s as g,t as b,n as v,d as P,b as z,w as D,E as M,o as y}from"./CcQe4kPX.js";import{g as N}from"./MnJuaCIP.js";const T={class:"min-h-screen flex items-center justify-center dark:bg-gray-900 bg-gray-100"},_={class:"bg-white dark:bg-gray-800 text-black dark:text-white shadow-lg rounded-lg p-8 w-full max-w-md"},B={key:0,class:"text-red-500 text-sm text-center"},R={key:1,class:"text-red-500 text-sm text-center"},A={key:2,class:"text-green-500 text-sm text-center"},L=["disabled"],G={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},H={class:"text-center mt-4 text-sm text-gray-600 dark:text-gray-400"},J={__name:"Inscription",setup(O){const l=s(""),i=s(""),u=s(""),o=s(""),d=s(""),t=s(null),m=s(null),C=j(),E=N`
  mutation createUser($name: String!, $username: String!, $email: String!, $plainPassword: String!) {
    createUser(input: { name: $name, username: $username, email: $email, plainPassword: $plainPassword }) {
      # Demandez les champs dont vous avez besoin après l'inscription
      # Par exemple, juste un message de succès ou l'ID de l'utilisateur
      # Si votre mutation renvoie l'utilisateur, vous pouvez demander :
       user {
          id
         email
         name
         username
    }
  }
  }
`,{mutate:U,loading:w,error:k,onDone:V,onError:h}=I(E),S=async()=>{if(t.value=null,m.value=null,!l.value||!i.value||!u.value||!o.value||!d.value){t.value="Veuillez remplir tous les champs.";return}if(o.value!==d.value){t.value="Les mots de passe ne correspondent pas.";return}if(o.value.length<8){t.value="Le mot de passe doit contenir au moins 8 caractères.";return}try{await U({name:l.value,username:i.value,email:u.value,plainPassword:o.value})}catch(n){console.error("Erreur lors de l'appel de la mutation:",n),k.value||(t.value="Une erreur inattendue s'est produite.")}};return V(n=>{var f,a;console.log("Inscription réussie:",n.data);const e=(a=(f=n.data)==null?void 0:f.createUser)==null?void 0:a.user;e?m.value=`Bienvenue ${e.name} ! Ton compte a été créé avec succès.`:m.value="Inscription réussie.",l.value="",i.value="",u.value="",o.value="",d.value="",setTimeout(()=>{C.push("/login")},3e3)}),h(n=>{console.error("Erreur GraphQL lors de l'inscription:",n),t.value=null}),(n,e)=>{const f=M("router-link");return y(),p("div",T,[r("div",_,[e[13]||(e[13]=r("h1",{class:"text-2xl font-bold text-center mb-6 text-indigo-600 dark:text-indigo-400"}," Créer un compte ",-1)),r("form",{onSubmit:q(S,["prevent"]),class:"space-y-4"},[r("div",null,[e[5]||(e[5]=r("label",{for:"name",class:"block text-gray-700 dark:text-gray-300 mb-1"},"Nom complet",-1)),c(r("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),type:"text",id:"name",name:"name",placeholder:"Jean Dupont",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"},null,512),[[g,l.value]])]),r("div",null,[e[6]||(e[6]=r("label",{for:"username",class:"block text-gray-700 dark:text-gray-300 mb-1"},"Nom d'utilisateur",-1)),c(r("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),type:"text",id:"username",name:"username",placeholder:"jeandupont",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"},null,512),[[g,i.value]])]),r("div",null,[e[7]||(e[7]=r("label",{for:"email",class:"block text-gray-700 dark:text-gray-300 mb-1"},"Email",-1)),c(r("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),type:"email",id:"email",name:"email",placeholder:"jean.dupont@email.com",required:"",autocomplete:"email",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"},null,512),[[g,u.value]])]),r("div",null,[e[8]||(e[8]=r("label",{for:"plainPassword",class:"block text-gray-700 dark:text-gray-300 mb-1"},"Mot de passe",-1)),c(r("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>o.value=a),type:"plainPassword",id:"plainPassword",name:"plainPassword",placeholder:"********",required:"",autocomplete:"new-plainPassword",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"},null,512),[[g,o.value]])]),r("div",null,[e[9]||(e[9]=r("label",{for:"plainPasswordConfirmation",class:"block text-gray-700 dark:text-gray-300 mb-1"},"Confirmer le mot de passe",-1)),c(r("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>d.value=a),type:"plainPassword",id:"plainPasswordConfirmation",name:"plainPasswordConfirmation",placeholder:"********",required:"",autocomplete:"new-plainPassword",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-400"},null,512),[[g,d.value]])]),t.value?(y(),p("p",B,b(t.value),1)):x("",!0),v(k)?(y(),p("p",R," Erreur d'inscription: "+b(v(k).message),1)):x("",!0),m.value?(y(),p("p",A,b(m.value),1)):x("",!0),r("button",{type:"submit",disabled:v(w),class:"w-full bg-indigo-500 text-white py-2 rounded hover:bg-indigo-600 transition disabled:opacity-50 flex items-center justify-center"},[v(w)?(y(),p("svg",G,e[10]||(e[10]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):x("",!0),P(" "+b(v(w)?"Inscription en cours...":"S'inscrire"),1)],8,L)],32),r("p",H,[e[12]||(e[12]=P(" Déjà un compte ? ")),z(f,{to:"/login",class:"font-medium text-indigo-600 dark:text-indigo-400 hover:underline"},{default:D(()=>e[11]||(e[11]=[P(" Connectez-vous ici ")])),_:1})])])])}}},K=$(J,[["__scopeId","data-v-c40a54d6"]]);export{K as default};
